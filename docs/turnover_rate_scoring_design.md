# 基于换手率的流动性评分方案设计

## 当前问题

目前的流动性评分使用**成交额绝对值**，存在以下问题：

1. **不公平**：大市值股票天然成交额更高，小市值股票处于劣势
2. **阈值固定**：`min_turnover = 10000万` 对不同市值股票意义不同
3. **缺乏相对性**：没有考虑股票自身的市值规模

## 改进方案

使用**换手率**（成交额/流通市值）作为流动性指标更加科学：

```
换手率(%) = 成交额 / 流通市值 × 100
```

### 换手率的优势

1. ✅ **相对指标**：消除了市值规模的影响
2. ✅ **统一标准**：大小盘股票使用同一套评分标准
3. ✅ **API直接提供**：腾讯API的字段[56]直接返回换手率

## 换手率评分标准

### 技术面-流动性评分（5分）

流动性评分关注**交易活跃度**，适度的换手率最好：

| 换手率范围 | 评分 | 说明 |
|-----------|------|------|
| 1% - 3% | 5分 | 流动性适中，最佳状态 |
| 3% - 5% | 4分 | 流动性良好 |
| 5% - 8% | 3分 | 流动性充足，略偏高 |
| 0.5% - 1% | 2分 | 流动性偏低但可接受 |
| > 8% | 1分 | 换手过高，投机性强 |
| < 0.5% | 0分 | 流动性不足 |

**设计理念**：
- **适中最优**：1-3%是A股正常的活跃换手率区间
- **过高扣分**：>8%说明投机氛围浓，短期波动大
- **过低扣分**：<0.5%流动性不足，难以交易

### 安全性-波动性评分（4分）

安全性评分关注**筹码稳定性**，低换手率最好：

| 换手率范围 | 评分 | 说明 |
|-----------|------|------|
| 0% - 2% | 4分 | 筹码极度稳定 |
| 2% - 5% | 3分 | 筹码较稳定 |
| 5% - 10% | 1分 | 筹码不稳定 |
| > 10% | 0分 | 投机性极强 |

**设计理念**：
- **低换手=安全**：换手率低说明持有者信心足，不轻易卖出
- **高换手=风险**：频繁换手说明分歧大，价格波动风险高

## 两种评分的区别

| 维度 | 技术面-流动性 | 安全性-波动性 |
|------|--------------|---------------|
| 关注点 | 交易活跃度 | 筹码稳定性 |
| 最优值 | 1-3% (适中) | 0-2% (越低越好) |
| 权重 | 5分 | 4分 |
| 逻辑 | 便于买卖 | 降低风险 |

## 实施方案

### 修改前（使用成交额）

```python
# 1.3 流动性 (5分)
turnover = stock_data.get('turnover', 0)
min_turnover = self.config.get('min_turnover', 10000)
if turnover > min_turnover * 3:
    score_breakdown['technical'] += 5
elif turnover > min_turnover * 2:
    score_breakdown['technical'] += 3
elif turnover > min_turnover:
    score_breakdown['technical'] += 1
```

### 修改后（使用换手率）

```python
# 1.3 流动性 (5分) - 基于换手率
turnover_rate = stock_data.get('turnover_rate', 0)
if turnover_rate and 1 <= turnover_rate < 3:  # 最佳流动性
    score_breakdown['technical'] += 5
elif turnover_rate and 3 <= turnover_rate < 5:  # 良好
    score_breakdown['technical'] += 4
elif turnover_rate and 5 <= turnover_rate < 8:  # 充足
    score_breakdown['technical'] += 3
elif turnover_rate and 0.5 <= turnover_rate < 1:  # 偏低
    score_breakdown['technical'] += 2
elif turnover_rate and turnover_rate >= 8:  # 过高
    score_breakdown['technical'] += 1
# < 0.5% 不得分
```

## 示例对比

### 案例1：大盘蓝筹（中国人寿）

- 成交额：96,967万
- 换手率：1.38%

**修改前（成交额）**：
- `96967 > 10000 * 3` → 得5分 ✓

**修改后（换手率）**：
- `1.38%` 在 1%-3% 区间 → 得5分 ✓

**结论**：评分一致

### 案例2：小盘股

- 成交额：5,000万（小于30,000）
- 换手率：2.5%（活跃度适中）

**修改前（成交额）**：
- `5000 < 10000` → 得0分 ❌ 不公平！

**修改后（换手率）**：
- `2.5%` 在 1%-3% 区间 → 得5分 ✓ 公平！

**结论**：换手率评分更公平

### 案例3：妖股

- 成交额：50,000万
- 换手率：25%（投机严重）

**修改前（成交额）**：
- `50000 > 10000 * 3` → 得5分 ❌ 错误！

**修改后（换手率）**：
- `25% > 8%` → 得1分 ✓ 正确识别风险！

**结论**：换手率能识别投机风险

## 预期效果

1. ✅ **公平性提升**：大小盘股票用统一标准
2. ✅ **风险识别**：能识别换手率过高的投机股
3. ✅ **逻辑清晰**：换手率是相对指标，更有经济意义
4. ✅ **数据可得**：API直接提供，无需额外计算

## 兼容性考虑

为了保持向后兼容，建议：

1. **保留成交额过滤**：在 `apply_additional_filters()` 中仍使用成交额做初步筛选
2. **仅修改评分**：只在 `calculate_strength_score()` 中使用换手率打分
3. **添加注释**：说明为何使用换手率而非成交额

---

**设计者**: Claude
**设计日期**: 2025-10-31
**版本**: v1.0
